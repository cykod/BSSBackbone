<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Data Set</title>
      <script src='js/jquery.min.js'></script>
      <script src='js/handlebars.js'></script>
      <script src='js/underscore.js'></script>
      <script src='js/backbone.js'></script>
</head>
<body>
<script>
$(function() {

  var Templates = window.Templates = {};
  $("script[type=handlebars]").each(function() {
    Templates[this.id] = Handlebars.compile($(this).html());
  });


  var PageRouter = window.Pagerouter = Backbone.Router.extend({
    routes: {
      "":  "home",
      "about": "about",
      "article/:name": "viewArticle"
    },

    initialize: function() {
      new NavigationView({ router: this, el: $("#navigation") }).render();
    },

    home: function() {
      $("#content").empty()
                   .append(new HomeView().render().el)
    },

    about: function() {
      $("#content").empty()
                   .append(new AboutView().render().el)

    },

    viewArticle: function(name) {
      // Normally we'd grab an article from a collection or fetch it,
      // but, let's make a dummy one:
      var article = new Article({ title: name, body: "Lorem ipsum dolor sit amet." });

      $("#content").empty()
                   .append(new ArticleView({ model: article }).render().el)
    }
  });

  var Article = Backbone.Model.extend();


  var HomeView = Backbone.View.extend({
    template: Templates["home-template"],
    render: function() {
      $(this.el).empty()
                .append(this.template());
      return this;
    }
  });

  var AboutView = Backbone.View.extend({
    template: Templates["about-template"],

    render: function() {
      $(this.el).empty()
                .append(this.template());
      return this;
    }
  });

  var ArticleView = Backbone.View.extend({
    template: Templates["article-template"],

    events: {
      "click .like-it": "like"
    },

    like: function(e) {
      // Need to ignore the URL
      e.preventDefault();
      alert("You Like: " + this.model.get("title"));
    },

    render: function() {
      $(this.el).empty()
                .append(this.template(this.model.toJSON()));
      return this;
    }

  });

  var NavigationView = Backbone.View.extend({
    initialize: function() {
      var router = this.options.router;

      router.on("route:home",this.highlightHome,this);
      router.on("route:about",this.highlightAbout,this);
    },

    highlightHome: function() {
      this.$("a").css({ fontWeight: "normal" });
      this.$("#home-link").css("fontWeight","bold");
    },

    highlightAbout: function() {
      this.$("a").css({ fontWeight: "normal" });
      this.$("#about-link").css("fontWeight","bold");
    }

  });

  var pageRouter = window.pageRouter = new PageRouter();
  Backbone.history.start();

});

</script> 

<script type='handlebars' id='home-template'>
<h2>Welcome to the site!</h2>
<ul>
  <li><a href="#/article/My Article 1">My Article</a></li>
  <li><a href="#/article/My Article 2">My Article 2</a></li>
  <li><a href="#/article/My Article 3">My Article 3</a></li>
</ul>
</script>

<script type='handlebars' id='about-template'>
<h2>More about the site</h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce bibendum, urna sed congue accumsan, odio lacus scelerisque orci, eget varius mi diam vitae ipsum. Sed ultrices molestie pellentesque. Sed eleifend, nisi et laoreet hendrerit, dui erat sagittis quam, eu placerat urna augue fringilla nibh. Ut gravida fringilla libero ut rhoncus. Integer felis justo, auctor nec elementum a, aliquet eget turpis. Sed scelerisque auctor quam, nec molestie diam consequat sit amet. Quisque semper nulla vel lectus bibendum quis imperdiet metus bibendum. Nunc ut sagittis dolor. Maecenas at risus sapien, in rhoncus enim. Etiam fermentum porta sapien nec iaculis.</p>
</script>

<script type='handlebars' id='article-template'>
<h2>{{title}}</h2>
<h3><a class='like-it' href='#'>Like</a></h3>
<p>{{body}}</p>
</script>

<h1>This is my site</h1>
<nav id='navigation'>
  <ul>
    <li><a id='home-link' href='#/'>Home</a></li>
    <li><a id='about-link' href='#/about'>About</a></li>
  </ul>
</nav>

<div id='content'>

</div>

</script>
</body>
</html>
